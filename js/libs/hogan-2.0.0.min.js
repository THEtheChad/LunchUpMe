/*
 *  Copyright 2011 Twitter, Inc.
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
var Hogan={};
(function(k,v){function o(a){return""+(null===a||void 0===a?"":a)}k.Template=function(a,b,f,d){this.r=a||this.r;this.c=f;this.options=d;this.text=b||"";this.buf=v?[]:""};k.Template.prototype={r:function(){return""},v:function(a){a=o(a);return y.test(a)?a.replace(w,"&amp;").replace(x,"&lt;").replace(l,"&gt;").replace(p,"&#39;").replace(m,"&quot;"):a},t:o,render:function(a,b,f){return this.ri([a],b||{},f)},ri:function(a,b,f){return this.r(a,b,f)},rp:function(a,b,f,d){a=f[a];if(!a)return"";this.c&&"string"==
typeof a&&(a=this.c.compile(a,this.options));return a.ri(b,f,d)},rs:function(a,b,f){var d=a[a.length-1];if(q(d))for(var c=0;c<d.length;c++)a.push(d[c]),f(a,b,this),a.pop();else f(a,b,this)},s:function(a,b,f,d,c,g,h){if(q(a)&&0===a.length)return!1;"function"==typeof a&&(a=this.ls(a,b,f,d,c,g,h));f=""===a||!!a;!d&&f&&b&&b.push("object"==typeof a?a:b[b.length-1]);return f},d:function(a,b,f,d){var c=a.split("."),g=this.f(c[0],b,f,d),h=null;if("."===a&&q(b[b.length-2]))return b[b.length-1];for(a=1;a<c.length;a++)g&&
"object"==typeof g&&c[a]in g?(h=g,g=g[c[a]]):g="";if(d&&!g)return!1;!d&&"function"==typeof g&&(b.push(h),g=this.lv(g,b,f),b.pop());return g},f:function(a,b,f,d){for(var c=!1,g=null,h=!1,s=b.length-1;0<=s;s--)if((g=b[s])&&"object"==typeof g&&a in g){c=g[a];h=!0;break}if(!h)return d?!1:"";!d&&"function"==typeof c&&(c=this.lv(c,b,f));return c},ho:function(a,b,f,d,c){var g=this.c,h=this.options;h.delimiters=c;d=a.call(b,d);d=null==d?""+d:d.toString();this.b(g.compile(d,h).render(b,f));return!1},b:v?function(a){this.buf.push(a)}:
function(a){this.buf+=a},fl:v?function(){var a=this.buf.join("");this.buf=[];return a}:function(){var a=this.buf;this.buf="";return a},ls:function(a,b,f,d,c,g,h){var b=b[b.length-1],s=null;if(!d&&this.c&&0<a.length)return this.ho(a,b,f,this.text.substring(c,g),h);s=a.call(b);if("function"==typeof s){if(d)return!0;if(this.c)return this.ho(s,b,f,this.text.substring(c,g),h)}return s},lv:function(a,b,f){b=b[b.length-1];a=a.call(b);return"function"==typeof a&&(a=o(a.call(b)),this.c&&~a.indexOf("{{"))?
this.c.compile(a,this.options).render(b,f):o(a)}};var w=/&/g,x=/</g,l=/>/g,p=/\'/g,m=/\"/g,y=/[&<>\"\']/,q=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}})("undefined"!==typeof exports?exports:Hogan);
(function(k){function v(c){"}"===c.n.substr(c.n.length-1)&&(c.n=c.n.substring(0,c.n.length-1))}function o(c){return c.trim?c.trim():c.replace(/^\s*|\s*$/g,"")}function w(c,a,h){if(a.charAt(h)!=c.charAt(0))return!1;for(var b=1,e=c.length;b<e;b++)if(a.charAt(h+b)!=c.charAt(b))return!1;return!0}function x(c,a,h,b){for(var a=[],e=null,d=null;0<c.length;){d=c.shift();if(!(e="#"==d.tag))if(!(e="^"==d.tag))a:{for(var e=d,f=b,n=0,k=f.length;n<k;n++)if(f[n].o==e.n){e.tag="#";e=!0;break a}e=void 0}if(e)h.push(d),
d.nodes=x(c,d.tag,h,b);else if("/"==d.tag){if(0===h.length)throw Error("Closing tag without opener: /"+d.n);e=h.pop();if(c=d.n!=e.n){a:{c=0;for(h=b.length;c<h;c++)if(b[c].c==d.n&&b[c].o==e.n){b=!0;break a}b=void 0}c=!b}if(c)throw Error("Nesting error: "+e.n+" vs. "+d.n);e.end=d.i;return a}a.push(d)}if(0<h.length)throw Error("missing closing tag: "+h.pop().n);return a}function l(c){return c.replace(f,"\\\\").replace(q,'\\"').replace(a,"\\n").replace(b,"\\r")}function p(c){return~c.indexOf(".")?"d":
"f"}function m(c){for(var a="",b=0,d=c.length;b<d;b++){var e=c[b].tag;if("#"==e)var e=c[b].nodes,f=p(c[b].n),k=c[b].i,n=c[b].end,o=c[b].otag+" "+c[b].ctag,e="if(_.s(_."+f+'("'+l(c[b].n)+'",c,p,1),c,p,0,'+k+","+n+',"'+o+'")){_.rs(c,p,function(c,p,_){'+m(e)+"});c.pop();}",a=a+e;else"^"==e?(e=c[b].nodes,e="if(!_.s(_."+p(c[b].n)+'("'+l(c[b].n)+'",c,p,1),c,p,1,0,0,"")){'+m(e)+"};",a+=e):"<"==e||">"==e?a+='_.b(_.rp("'+l(c[b].n)+'",c,p,"'+(c[b].indent||"")+'"));':"{"==e||"&"==e?(e="_.b(_.t(_."+p(c[b].n)+
'("'+l(c[b].n)+'",c,p,0)));',a+=e):"\n"==e?a+='_.b("\\n"'+(c.length-1==b?"":" + i")+");":"_v"==e?(e="_.b(_.v(_."+p(c[b].n)+'("'+l(c[b].n)+'",c,p,0)));',a+=e):void 0===e&&(e='"'+l(c[b])+'"',a+="_.b("+e+");")}return a}var y=/\S/,q=/\"/g,a=/\n/g,b=/\r/g,f=/\\/g,d={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};k.scan=function(a,b){function h(){0<r.length&&(j.push(new String(r)),r="")}function f(a,b){h();var c;if(c=a)a:{c=!0;for(var e=q;e<j.length;e++)if(c=j[e].tag&&d[j[e].tag]<d._v||!j[e].tag&&
null===j[e].match(y),!c){c=!1;break a}}if(c){c=q;for(var g;c<j.length;c++)if(!j[c].tag){if((g=j[c+1])&&">"==g.tag)g.indent=j[c].toString();j.splice(c,1)}}else b||j.push({tag:"\n"});m=!1;q=j.length}function e(a,c){var b="="+t,d=a.indexOf(b,c),e=o(a.substring(a.indexOf("=",c)+1,d)).split(" ");u=e[0];t=e[1];return d+b.length-1}var k=a.length,l=0,n=null,p=null,r="",j=[],m=!1,i=0,q=0,u="{{",t="}}";b&&(b=b.split(" "),u=b[0],t=b[1]);for(i=0;i<k;i++)0==l?w(u,a,i)?(--i,h(),l=1):"\n"==a.charAt(i)?f(m):r+=a.charAt(i):
1==l?(i+=u.length-1,n=(p=d[a.charAt(i+1)])?a.charAt(i+1):"_v","="==n?(i=e(a,i),l=0):(p&&i++,l=2),m=i):w(t,a,i)?(j.push({tag:n,n:o(r),otag:u,ctag:t,i:"/"==n?m-t.length:i+u.length}),r="",i+=t.length-1,l=0,"{"==n&&("}}"==t?i++:v(j[j.length-1]))):r+=a.charAt(i);f(m,!0);return j};k.generate=function(a,b,d){a='var _=this;_.b(i=i||"");'+m(a)+"return _.fl();";return d.asString?"function(c,p,i){"+a+";}":new k.Template(new Function("c","p","i",a),b,k,d)};k.parse=function(a,b,d){d=d||{};return x(a,"",[],d.sectionTags||
[])};k.cache={};k.compile=function(a,b){var b=b||{},d=a+"||"+!!b.asString,f=this.cache[d];if(f)return f;f=this.generate(this.parse(this.scan(a,b.delimiters),a,b),a,b);return this.cache[d]=f}})("undefined"!==typeof exports?exports:Hogan);